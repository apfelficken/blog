{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}
{% block content %}
    <div class="container">
        <div class="bg-light my-3">
            <h1>{{ post.title }}
                {% if perms.blog.change_post or post.author == request.user %}
                     <a href="{% url 'blog:update_post' post.pk %}" class="btn btn-secondary">
                         <i class="bi bi-pencil-square"></i>
                     </a>
                {% endif %}
                {% if perms.blog.delete_post or post.author == request.user %}
                    <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#deleteModal">
                        <i class="bi bi-trash3"></i>
                    </button>
                {% endif %}
            </h1>
            <p>
                Published {{ post.publish }}
                by
                <a class="text-secondary" href="{{ post.author.profile.get_absolute_url }}">
                    {{ post.author }}
                </a>
            </p>
            <p>
                <b>Categories:</b>
                {% for category in post.category.all %}
                    {{ category.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
        </div>
        <hr>
        <div class="mx-4">
            <p>{{ post.body|linebreaks }}</p>
        </div>
    </div>
    {% include 'partial/delete_post_modal.html' %}
{% endblock %}
